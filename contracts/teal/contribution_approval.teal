#pragma version 7
txn ApplicationID
int 0
==
bnz main_l22
txn OnCompletion
int OptIn
==
bnz main_l21
txn OnCompletion
int NoOp
==
bnz main_l12
txn OnCompletion
int CloseOut
==
bnz main_l11
txn OnCompletion
int UpdateApplication
==
bnz main_l10
txn OnCompletion
int DeleteApplication
==
bnz main_l9
txn OnCompletion
int ClearState
==
bnz main_l8
err
main_l8:
int 1
return
main_l9:
int 0
return
main_l10:
int 0
return
main_l11:
int 0
return
main_l12:
txna ApplicationArgs 0
byte "vote"
==
bnz main_l20
txna ApplicationArgs 0
byte "score_hash"
==
bnz main_l19
txna ApplicationArgs 0
byte "finalize"
==
bnz main_l18
txna ApplicationArgs 0
byte "mint_rep"
==
bnz main_l17
err
main_l17:
byte "final"
app_global_get
int 1
==
assert
txn Sender
byte "creator"
app_global_get
==
assert
txn NumAccounts
int 1
>=
assert
txna Accounts 0
byte "rep"
app_local_get
int 0
==
assert
txn NumAppArgs
int 2
>=
assert
txna Accounts 0
byte "rep"
txna ApplicationArgs 0
btoi
app_local_put
int 1
return
main_l18:
global LatestTimestamp
byte "d_vote"
app_global_get
>=
assert
byte "final"
app_global_get
int 0
==
assert
txn Sender
byte "creator"
app_global_get
==
assert
byte "final"
int 1
app_global_put
int 1
return
main_l19:
global LatestTimestamp
byte "d_vote"
app_global_get
>=
assert
byte "final"
app_global_get
int 0
==
assert
int 1
return
main_l20:
global LatestTimestamp
byte "d_contrib"
app_global_get
>=
assert
global LatestTimestamp
byte "d_vote"
app_global_get
<
assert
txn Sender
byte "voted"
app_local_get
int 0
==
assert
txn NumAppArgs
int 2
>=
assert
txn Sender
byte "voted"
int 1
app_local_put
txn Sender
byte "vscore"
txna ApplicationArgs 0
btoi
app_local_put
int 1
return
main_l21:
global LatestTimestamp
byte "d_vote"
app_global_get
<
assert
txn Sender
byte "voted"
int 0
app_local_put
txn Sender
byte "rep"
int 0
app_local_put
int 1
return
main_l22:
txn NumAppArgs
int 7
>=
assert
byte "pid"
txna ApplicationArgs 0
btoi
app_global_put
byte "d_contrib"
txna ApplicationArgs 1
btoi
app_global_put
byte "d_vote"
txna ApplicationArgs 2
btoi
app_global_put
byte "w_code"
txna ApplicationArgs 3
btoi
app_global_put
byte "w_time"
txna ApplicationArgs 4
btoi
app_global_put
byte "w_vote"
txna ApplicationArgs 5
btoi
app_global_put
byte "rep_asa"
txna ApplicationArgs 6
btoi
app_global_put
byte "creator"
txn Sender
app_global_put
byte "init"
int 1
app_global_put
byte "mcount"
int 0
app_global_put
byte "final"
int 0
app_global_put
int 1
return